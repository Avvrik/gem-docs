import { Callout } from 'components'

Hook is used for update bets cache.

<Callout type="warning">
  Can only be used with [`useBets`](/sdk/data-hooks/useBets).
</Callout>

When you fetch bets using `useBets`, the data is stored in the cache. This prevents the need to request the data again if the user revisits the page with the list of bets. However, it's essential to update this cache after a user places a new bet or redeems winning one, ensuring the list of bets remains up to date.

#### Usage

Update the bet cache after the redeem action.

```ts {1, 8-14}
const { updateBetCache } = useBetsCache()
const { submit } = useRedeemBet()

const handleRedeem = async () => {
  try {
    await submit({ tokenId, coreAddress })

    updateBetCache({
      coreAddress,
      tokenId,
    }, {
      isRedeemed: true,
      isRedeemable: false,
    })
  } catch {}
}

handleRedeem()
```

Update the cache with the new bet after the bet action.

```ts {1, 8-14}
const { addBet } = useBetsCache()
const { submit } = usePrepareBet({
  amount,
  slippage: 5,
  affiliate: '0x0000000000000000000000000000000000000000',
  selections,
  onSuccess: (receipt: TransactionReceipt) => {
    addBet({
      receipt,
      bet: {
        amount,
        outcomes: [...]
      }
    })
  },
})
```

#### Return Value

```ts
{
  updateBetCache: ({ coreAddress, tokenId }: UpdateBetProps, values: Partial<BetFragment>) => void; // function to update an existing bet in the cache
  addBet: (props: NewBetProps) => void; // function to add the new bet in the cache
}
```

```ts
type Selection = {
  conditionId: string | bigint
  outcomeId: string | bigint
}

type UpdateBetProps = {
  coreAddress: Address
  tokenId: string
}

type BetCacheOutcome = {
  odds: string | bigint
  gameId: string | bigint
} & Selection

type NewBetProps = {
  bet: {
    amount: string
    outcomes: BetCacheOutcome[]
    freebetId?: string | bigint
    freebetContractAddress?: Address
  }
  receipt: TransactionReceipt
}
```
